//Code Generated By Project A.L.I.C.E Developer Toolkit
//Class File Generated: 11/12/2018 1:27 AM
//Source Journal Line: { "timestamp":"2018-10-12T00:02:53Z", "event":"Bounty", "Rewards":[ { "Faction":"BD+06 5034 Bridge Commodities", "Reward":55800 }, { "Faction":"Cavalry Command of Yuma", "Reward":65260 }, { "Faction":"Revolutionary Lalande 43492 Labour", "Reward":74160 }, { "Faction":"LHS 480 Crimson Natural Group", "Reward":69840 } ], "Target":"python", "TotalReward":265060, "VictimFaction":"Nankul General Holdings", "SharedWithOthers":1 }

using ALICE_Core;
using ALICE_Debug;
using ALICE_Internal;
using ALICE_Response;
using System;
using System.Collections.Generic;

namespace ALICE_Events
{
    /// <summary>
    /// Object Data Class
    /// </summary>
    public class Bounty : Base
    {
        //Shared Properties
        public string Target { get; set; }
        public string VictimFaction { get; set; }
        public string VictimFaction_Localised { get; set; }
        public decimal SharedWithOthers { get; set; }

        //Target Is A Ship
        public List<BountyReward> Rewards { get; set; }
        public decimal TotalReward { get; set; }

        //Target Is A Skimmer
        public string Faction { get; set; }
        public decimal Reward { get; set; }

        //Default Constructor
        public Bounty()
        {
            Rewards = new List<BountyReward>();
            Target = Str();
            TotalReward = Dec();
            VictimFaction = Str();
            VictimFaction_Localised = Str();
            SharedWithOthers = Dec();
            Faction = Str();
            Reward = Dec();
        }

        public class BountyReward : Catch
        {
            public string Faction { get; set; }
            public decimal Reward { get; set; }

            public BountyReward()
            {
                Faction = Str();
                Reward = Dec();
            }
        }
    }

    /// <summary>
    /// Event Logic & Data Storage Class
    /// </summary>
    public class Event_Bounty : Event
    {
        //Event Instance
        public Bounty I { get; set; } = new Bounty();

        //Variable Generation
        public override void Generate(object O)
        {
            try
            {
                Variables.Record(Name + "_Victim", I.Target);
                Variables.Record(Name + "_VictimFaction", I.VictimFaction_Localised);
                Variables.Record(Name + "_Shared", I.SharedWithOthers);

                //Skimmer
                if (I.Reward != -1)
                {
                    Variables.Record(Name + "_Vehicle", "Skimmer");
                    Variables.Record(Name + "_Reward", I.Reward);
                }
                //Ship
                else
                {
                    Variables.Record(Name + "_Vehicle", "Ship");
                    Variables.Record(Name + "_Reward", I.TotalReward);
                }
            }
            catch (Exception ex)
            {
                ExceptionGenerate(Name, ex);
            }
        }

        //Plugin Logic Preparations
        public override void Prepare(object O)
        {
            try
            {
                //Update Event Instance
                I = (Bounty)O;
            }
            catch (Exception ex)
            {
                ExceptionPrepare(Name, ex);
            }
        }

        //Plugin Logic Process
        public override void Process(object O)
        {
            try
            {
                //Update Bounty Status Object
                IStatus.Bounty.Update(I);

                //Bounty Audio
                IResponse.Bounty.Collected(                    
                    ICheck.Initialized(ClassName),                          //Check Plugin Initialized
                    ICheck.Report.CollectedBounty(ClassName, true, true));  //Check Bounty Reports Enabled
            }
            catch (Exception ex)
            {
                ExceptionProcess(Name, ex);
            }
        }
    }
}